# Benchmarks

## fgmetric vs fgpyo

On example files with 10,000 and 100,000 rows, fgmetric's Pydantic-based validation is ~5x faster than fgpyo's reflection-based approach.

```console
$ uv run --extra benchmark poe benchmark

--------------------------------------------------------------------------- benchmark 'num_rows=1e4': 2 tests ----------------------------------------------------------------------------
Name (time in ms)           Min                 Max                Mean            StdDev              Median               IQR            Outliers      OPS            Rounds  Iterations
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_fgmetric[1e4]      46.9850 (1.0)       56.2292 (1.0)       50.3851 (1.0)      3.3265 (1.0)       49.1207 (1.0)      6.4517 (1.02)          6;0  19.8471 (1.0)          18           1
test_fgpyo[1e4]        270.8720 (5.77)     282.5591 (5.03)     275.4368 (5.47)     4.5861 (1.38)     274.8490 (5.60)     6.3225 (1.0)           1;0   3.6306 (0.18)          5           1
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

-------------------------------------------------------------------------------- benchmark 'num_rows=1e5': 2 tests --------------------------------------------------------------------------------
Name (time in ms)             Min                   Max                  Mean             StdDev                Median                IQR            Outliers     OPS            Rounds  Iterations
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_fgmetric[1e5]       548.3379 (1.0)        579.5940 (1.0)        563.7652 (1.0)      12.6133 (1.21)       564.8853 (1.0)      20.6046 (1.27)          2;0  1.7738 (1.0)           5           1
test_fgpyo[1e5]        2,764.4992 (5.04)     2,790.0149 (4.81)     2,775.1369 (4.92)     10.4317 (1.0)      2,776.1375 (4.91)     16.2167 (1.0)           2;0  0.3603 (0.20)          5           1
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
```

## Running Benchmarks

To run the benchmarks yourself:

```console
uv run --extra benchmark poe benchmark
```

This requires the `benchmark` optional dependency group, which includes `pytest-benchmark` and `fgpyo`.
